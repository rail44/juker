import{r as v,c as l,S as w,a as d,o as m,i as I,b as S,t as b,v as L,d as g,s as P}from"./vendor.dab25925.js";const N=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}};N();const y=b("<div></div>"),O="localhost:8080";function u(n,o){n.send(JSON.stringify(o))}const E=n=>{const[o,i]=d(!1),r=L();let e;return m(()=>{e=new YT.Player(r,{height:"360",width:"640",videoId:n.videoId,playerVars:{controls:0,disablekb:1},events:{onReady:()=>{i(!0)},onStateChange:t=>{console.log(t.data),t.data===1&&u(n.socket,{type:"ping"}),t.data===0&&u(n.socket,{type:"feed",pointer:n.pointer+1})}}})}),g(()=>{!o()||e.loadVideoById(n.videoId)}),g(()=>{!o()||(console.log(n.duration),e.seekTo(n.duration))}),(()=>{const t=y.cloneNode(!0);return P(t,"id",r),t})()},A=n=>{const[o,i]=d(!1),[r,e]=d(""),[t,s]=d(0),[h,k]=d(0);return m(()=>{n.socket.addEventListener("message",a=>{console.log(a);const c=JSON.parse(a.data),f=c.queue[c.pointer];!f||(e(f.id),k(c.duration),s(c.pointer),i(!0))}),u(n.socket,{type:"ping"})}),(()=>{const a=y.cloneNode(!0);return I(a,l(S,{get when(){return o()},get children(){return l(E,{get videoId(){return r()},get duration(){return h()},get socket(){return n.socket},get pointer(){return t()}})}})),a})()},p=new WebSocket(`ws://${O}/socket`);await new Promise(n=>p.addEventListener("open",n));await window.jukerYtLoadingPromise;v(()=>l(w,{get children(){return l(A,{socket:p})}}),document.getElementById("root"));
