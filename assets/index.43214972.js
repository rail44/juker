import{r as h,c,S as k,a,o as g,i as p,b as v,t as w,v as I,d as f,s as S}from"./vendor.dab25925.js";const L=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};L();const m=w("<div></div>"),P="localhost:8080",b=o=>{const[n,s]=a(!1),r=I();let e;return g(()=>{e=new YT.Player(r,{height:"360",width:"640",videoId:o.videoId,events:{onReady:()=>{s(!0)},onStateChange:t=>{console.log(t.data),t.data===1&&o.socket.send("ping"),t.data===0&&o.socket.send("feed")}}})}),f(()=>{!n()||e.loadVideoById(o.videoId)}),f(()=>{!n()||(console.log(o.duration),e.seekTo(o.duration))}),(()=>{const t=m.cloneNode(!0);return S(t,"id",r),t})()},N=o=>{const[n,s]=a(!1),[r,e]=a(""),[t,i]=a(0);return g(()=>{o.socket.addEventListener("message",d=>{console.log(d);const u=JSON.parse(d.data),l=u.queue[u.pointer];!l||(e(l.id),i(u.duration),s(!0))}),o.socket.send("ping")}),(()=>{const d=m.cloneNode(!0);return p(d,c(v,{get when(){return n()},get children(){return c(b,{get videoId(){return r()},get duration(){return t()},get socket(){return o.socket}})}})),d})()},y=new WebSocket(`ws://${P}/socket`);await new Promise(o=>y.addEventListener("open",o));await window.jukerYtLoadingPromise;h(()=>c(k,{get children(){return c(N,{socket:y})}}),document.getElementById("root"));
