import{r as S,c,S as b,a as s,o as y,i as g,b as L,t as p,v as N,d as m,s as P}from"./vendor.dab25925.js";const O=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function d(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function i(e){if(e.ep)return;e.ep=!0;const t=d(e);fetch(e.href,t)}};O();const _=p("<div></div>"),E=p("<div><div></div><div>listeners: </div></div>"),$="wss://juker.onrender.com/socket";function f(n,r){n.send(JSON.stringify(r))}const C=n=>{const[r,d]=s(!1),i=N();let e;return y(()=>{e=new YT.Player(i,{height:"360",width:"640",videoId:n.videoId,playerVars:{controls:0,disablekb:1},events:{onReady:()=>{d(!0)},onStateChange:t=>{if(console.log(t.data),t.data===1&&f(n.socket,{type:"ping"}),t.data===0){if(n.pointer===null)return;f(n.socket,{type:"feed",pointer:n.pointer+1})}}}})}),m(()=>{!r()||n.pointer!==null&&e.loadVideoById(n.videoId)}),m(()=>{!r()||Math.abs(e.getCurrentTime()-n.duration)<=5||e.seekTo(n.duration)}),(()=>{const t=_.cloneNode(!0);return P(t,"id",i),t})()},M=n=>{const[r,d]=s(!1),[i,e]=s(null),[t,l]=s(null),[v,k]=s(0),[w,I]=s(0);return y(()=>{n.socket.addEventListener("message",a=>{console.log(a);const o=JSON.parse(a.data);if(k(o.duration),I(o.listeners),l(o.pointer),o.pointer===null){e(null);return}const u=o.queue[o.pointer];e(u.id),d(!0)}),f(n.socket,{type:"ping"})}),(()=>{const a=E.cloneNode(!0),o=a.firstChild,u=o.nextSibling;return u.firstChild,g(o,c(L,{get when(){return r()},get children(){return c(C,{get videoId(){return i()},get duration(){return v()},get socket(){return n.socket},get pointer(){return t()}})}})),g(u,w,null),a})()},h=new WebSocket($);await new Promise(n=>h.addEventListener("open",n));await window.jukerYtLoadingPromise;S(()=>c(b,{get children(){return c(M,{socket:h})}}),document.getElementById("root"));
