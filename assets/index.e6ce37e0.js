import{r as w,c,S,a as f,o as v,i as d,b as y,t as g,d as N,v as _,e as h,s as b,u as $}from"./vendor.de178950.js";const L=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}};L();const C=g("<div></div>"),P=g("<div>queue count: </div>"),O=g("<div>remains: </div>"),E=g("<div><div></div><div>listeners: </div></div>"),M="wss://juker.onrender.com/socket";function m(n,r){n.send(JSON.stringify(r))}const I=n=>{const r=N(()=>n.playing.position),[s,l]=f(!1),e=_();let t;return v(()=>{t=new YT.Player(e,{height:"360",width:"640",playerVars:{disablekb:1},events:{onReady:()=>{l(!0)},onStateChange:i=>{i.data===1&&m(n.socket,{type:"ping"}),i.data===0&&m(n.socket,{type:"feed",position:n.playing.position+1})}}})}),h(()=>{!s()||(r(),t.loadVideoById($(()=>n.playing.id)))}),h(()=>{!s()||Math.abs(t.getCurrentTime()-n.playing.duration)<=1||t.seekTo(n.playing.duration)}),(()=>{const i=C.cloneNode(!0);return b(i,"id",e),i})()},T=n=>{const[r,s]=f(null),[l,e]=f(0),[t,i]=f(0);return v(()=>{n.socket.addEventListener("message",a=>{const u=JSON.parse(a.data);s(u.playing),e(u.listeners),i(u.count)}),m(n.socket,{type:"ping"})}),(()=>{const a=E.cloneNode(!0),u=a.firstChild,p=u.nextSibling;return p.firstChild,d(u,c(y,{get when(){return r()!==null},get children(){return c(I,{get playing(){return r()},get socket(){return n.socket}})}})),d(p,l,null),d(a,c(y,{get when(){return r()===null},get children(){const o=P.cloneNode(!0);return o.firstChild,d(o,t,null),o}}),null),d(a,c(y,{get when(){return r()!==null},get children(){const o=O.cloneNode(!0);return o.firstChild,d(o,()=>t()-r().position-1,null),o}}),null),a})()},k=new WebSocket(M);await new Promise(n=>k.addEventListener("open",n));await window.jukerYtLoadingPromise;w(()=>c(S,{get children(){return c(T,{socket:k})}}),document.getElementById("root"));
