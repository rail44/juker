import{r as w,c as u,S,a as f,o as v,i as d,b as y,t as g,d as N,v as _,e as h,s as b,u as $}from"./vendor.de178950.js";const L=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?t.credentials="include":e.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}};L();const C=g("<div></div>"),P=g("<div>queue count: </div>"),O=g("<div>remains: </div>"),E=g("<div><div></div><div>listeners: </div></div>"),M="wss://juker.onrender.com/socket";function m(n,r){n.send(JSON.stringify(r))}const I=n=>{const r=N(()=>n.playing.position),[l,a]=f(!1),e=_();let t;return v(()=>{t=new YT.Player(e,{height:"360",width:"640",playerVars:{controls:0,disablekb:1},events:{onReady:()=>{a(!0)},onStateChange:o=>{console.log(o.data),o.data===1&&m(n.socket,{type:"ping"}),o.data===0&&m(n.socket,{type:"feed",position:n.playing.position+1})}}})}),h(()=>{!l()||(r(),t.loadVideoById($(()=>n.playing.id)))}),h(()=>{!l()||Math.abs(t.getCurrentTime()-n.playing.duration)<=1||t.seekTo(n.playing.duration)}),(()=>{const o=C.cloneNode(!0);return b(o,"id",e),o})()},T=n=>{const[r,l]=f(null),[a,e]=f(0),[t,o]=f(0);return v(()=>{n.socket.addEventListener("message",i=>{console.log(i);const c=JSON.parse(i.data);l(c.playing),e(c.listeners),o(c.count)}),m(n.socket,{type:"ping"})}),(()=>{const i=E.cloneNode(!0),c=i.firstChild,p=c.nextSibling;return p.firstChild,d(c,u(y,{get when(){return r()!==null},get children(){return u(I,{get playing(){return r()},get socket(){return n.socket}})}})),d(p,a,null),d(i,u(y,{get when(){return r()===null},get children(){const s=P.cloneNode(!0);return s.firstChild,d(s,t,null),s}}),null),d(i,u(y,{get when(){return r()!==null},get children(){const s=O.cloneNode(!0);return s.firstChild,d(s,()=>t()-r().position-1,null),s}}),null),i})()},k=new WebSocket(M);await new Promise(n=>k.addEventListener("open",n));await window.jukerYtLoadingPromise;w(()=>u(S,{get children(){return u(T,{socket:k})}}),document.getElementById("root"));
