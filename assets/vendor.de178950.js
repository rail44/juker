const p={};function V(e){p.context=e}const fe=(e,t)=>e===t,L={equals:fe};let z=ie;const m={},b=1,O=2,ee={owned:null,cleanups:null,context:null,owner:null};var f=null;let F=null,u=null,N=null,a=null,g=null,X=0;function te(e,t){const n=u,s=f,i=e.length===0?ee:{owned:null,cleanups:null,context:null,owner:t||s};f=i,u=null;try{return J(()=>e(()=>K(i)),!0)}finally{u=n,f=s}}function Z(e,t){t=t?Object.assign({},L,t):L;const n={value:e,observers:null,observerSlots:null,pending:m,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.pending!==m?n.pending:n.value)),$(n,i));return[se.bind(n),s]}function ue(e,t,n){const s=j(e,t,!0,b);A(s)}function H(e,t,n){const s=j(e,t,!1,b);A(s)}function ce(e,t,n){z=Ce;const s=j(e,t,!1,b),i=k&&Y(f,k.id);i&&(s.suspense=i),s.user=!0,g?g.push(s):queueMicrotask(()=>A(s))}function S(e,t,n){n=n?Object.assign({},L,n):L;const s=j(e,t,!0,0);return s.pending=m,s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,A(s),se.bind(s)}function ae(e){if(N)return e();let t;const n=N=[];try{t=e()}finally{N=null}return J(()=>{for(let s=0;s<n.length;s+=1){const i=n[s];if(i.pending!==m){const l=i.pending;i.pending=m,$(i,l)}}},!1),t}function v(e){let t,n=u;return u=null,t=e(),u=n,t}function Pe(e){ce(()=>v(e))}function he(e){return f===null||(f.cleanups===null?f.cleanups=[e]:f.cleanups.push(e)),e}function de(){return f}function pe(e){g.push.apply(g,e),e.length=0}function ne(e){const t=Symbol("context");return{id:t,Provider:me(t),defaultValue:e}}function ge(e){let t;return(t=Y(f,e.id))!==void 0?t:e.defaultValue}function ye(e){const t=S(e);return S(()=>Q(t()))}let k;function xe(){return k||(k=ne({}))}function se(){const e=F;if(this.sources&&(this.state||e)){const t=a;a=null,this.state===b||e?A(this):D(this),a=t}if(u){const t=this.observers?this.observers.length:0;u.sources?(u.sources.push(this),u.sourceSlots.push(t)):(u.sources=[this],u.sourceSlots=[t]),this.observers?(this.observers.push(u),this.observerSlots.push(u.sources.length-1)):(this.observers=[u],this.observerSlots=[u.sources.length-1])}return this.value}function $(e,t,n){if(N)return e.pending===m&&N.push(e),e.pending=t,t;if(e.comparator&&e.comparator(e.value,t))return t;let s=!1;return e.value=t,e.observers&&e.observers.length&&J(()=>{for(let i=0;i<e.observers.length;i+=1){const l=e.observers[i];s&&F.disposed.has(l),(s&&!l.tState||!s&&!l.state)&&(l.pure?a.push(l):g.push(l),l.observers&&le(l)),s||(l.state=b)}if(a.length>1e6)throw a=[],new Error},!1),t}function A(e){if(!e.fn)return;K(e);const t=f,n=u,s=X;u=f=e,be(e,e.value,s),u=n,f=t}function be(e,t,n){let s;try{s=e.fn(t)}catch(i){oe(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.observers&&e.observers.length?$(e,s):e.value=s,e.updatedAt=n)}function j(e,t,n,s=b,i){const l={fn:e,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:f,context:null,pure:n};return f===null||f!==ee&&(f.owned?f.owned.push(l):f.owned=[l]),l}function R(e){const t=F;if(e.state===0||t)return;if(e.state===O||t)return D(e);if(e.suspense&&v(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<X);)(e.state||t)&&n.push(e);for(let s=n.length-1;s>=0;s--)if(e=n[s],e.state===b||t)A(e);else if(e.state===O||t){const i=a;a=null,D(e,n[0]),a=i}}function J(e,t){if(a)return e();let n=!1;t||(a=[]),g?n=!0:g=[],X++;try{return e()}catch(s){oe(s)}finally{we(n)}}function we(e){a&&(ie(a),a=null),!e&&(g.length?ae(()=>{z(g),g=null}):g=null)}function ie(e){for(let t=0;t<e.length;t++)R(e[t])}function Ce(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:R(i)}const s=e.length;for(t=0;t<n;t++)R(e[t]);for(t=s;t<e.length;t++)R(e[t])}function D(e,t){const n=F;e.state=0;for(let s=0;s<e.sources.length;s+=1){const i=e.sources[s];i.sources&&(i.state===b||n?i!==t&&R(i):(i.state===O||n)&&D(i,t))}}function le(e){const t=F;for(let n=0;n<e.observers.length;n+=1){const s=e.observers[n];(!s.state||t)&&(s.state=O,s.pure?a.push(s):g.push(s),s.observers&&le(s))}}function K(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const l=i.pop(),o=n.observerSlots.pop();s<i.length&&(l.sourceSlots[o]=s,i[s]=l,n.observerSlots[s]=o)}}if(e.owned){for(t=0;t<e.owned.length;t++)K(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function oe(e){throw e}function Y(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Y(e.owner,t):void 0}function Q(e){if(typeof e=="function"&&!e.length)return Q(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const s=Q(e[n]);Array.isArray(s)?t.push.apply(t,s):t.push(s)}return t}return e}function me(e){return function(n){let s;return ue(()=>s=v(()=>(f.context={[e]:n.value},ye(()=>n.children)))),s}}function Se(e,t){return v(()=>e(t))}function Ve(e){let t=!1;const n=S(()=>e.when,void 0,{equals:(s,i)=>t?s===i:!s==!i});return S(()=>{const s=n();if(s){const i=e.children;return(t=typeof i=="function"&&i.length>0)?v(()=>i(s)):i}return e.fallback})}const ve=ne();function Be(e){let t=0,n,s,i,l,o,r;const[y,x]=Z(!1),d=xe(),h={increment:()=>{++t===1&&x(!0)},decrement:()=>{--t===0&&x(!1)},inFallback:y,effects:[],resolved:!1},E=de();if(p.context){const U=p.context.id+p.context.count;if(l=p.load(U),l){(typeof l!="object"||!("then"in l))&&(l=Promise.resolve(l));const[I,P]=Z(void 0,{equals:!1});o=I,l.then(q=>{if(r=q)return P();p.gather(U),V(i),P(),V()})}}const T=ge(ve);T&&([n,s]=T.register(h.inFallback));let w;return he(()=>w&&w()),Se(d.Provider,{value:h,get children(){return S(()=>{if(r)throw r;if(i=p.context,o)return o(),o=void 0;i&&l===void 0&&V();const U=v(()=>e.children);return S(()=>{const I=h.inFallback(),P=n?n():!0,q=s?s():!0;if(w&&w(),(!I||l!==void 0)&&P)return h.resolved=!0,i=l=void 0,pe(h.effects),U;if(!!q)return te(re=>(w=re,i&&(V({id:i.id+"f",count:0}),i=void 0),e.fallback),E)})})}})}function Ae(e,t,n){let s=n.length,i=t.length,l=s,o=0,r=0,y=t[i-1].nextSibling,x=null;for(;o<i||r<l;){if(t[o]===n[r]){o++,r++;continue}for(;t[i-1]===n[l-1];)i--,l--;if(i===o){const d=l<s?r?n[r-1].nextSibling:n[l-r]:y;for(;r<l;)e.insertBefore(n[r++],d)}else if(l===r)for(;o<i;)(!x||!x.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[l-1]&&n[r]===t[i-1]){const d=t[--i].nextSibling;e.insertBefore(n[r++],t[o++].nextSibling),e.insertBefore(n[--l],d),t[i]=n[l]}else{if(!x){x=new Map;let h=r;for(;h<l;)x.set(n[h],h++)}const d=x.get(t[o]);if(d!=null)if(r<d&&d<l){let h=o,E=1,T;for(;++h<i&&h<l&&!((T=x.get(t[h]))==null||T!==d+E);)E++;if(E>d-r){const w=t[o];for(;r<d;)e.insertBefore(n[r++],w)}else e.replaceChild(n[r++],t[o++])}else o++;else t[o++].remove()}}}function Le(e,t,n){let s;return te(i=>{s=i,t===document?e():Ee(t,e(),t.firstChild?null:void 0,n)}),()=>{s(),t.textContent=""}}function Oe(e,t,n){const s=document.createElement("template");s.innerHTML=e;let i=s.content.firstChild;return n&&(i=i.firstChild),i}function ke(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Ee(e,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return M(e,t,s,n);H(i=>M(e,t(),i,n),s)}function M(e,t,n,s,i){for(p.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const l=typeof t,o=s!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,l==="string"||l==="number"){if(p.context)return n;if(l==="number"&&(t=t.toString()),o){let r=n[0];r&&r.nodeType===3?r.data=t:r=document.createTextNode(t),n=C(e,n,s,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||l==="boolean"){if(p.context)return n;n=C(e,n,s)}else{if(l==="function")return H(()=>{let r=t();for(;typeof r=="function";)r=r();n=M(e,r,n,s)}),()=>n;if(Array.isArray(t)){const r=[];if(W(r,t,i))return H(()=>n=M(e,r,n,s,!0)),()=>n;if(p.context){for(let y=0;y<r.length;y++)if(r[y].parentNode)return n=r}if(r.length===0){if(n=C(e,n,s),o)return n}else Array.isArray(n)?n.length===0?_(e,r,s):Ae(e,n,r):(n&&C(e),_(e,r));n=r}else if(t instanceof Node){if(p.context&&t.parentNode)return n=o?[t]:t;if(Array.isArray(n)){if(o)return n=C(e,n,s,t);C(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function W(e,t,n){let s=!1;for(let i=0,l=t.length;i<l;i++){let o=t[i],r;if(o instanceof Node)e.push(o);else if(!(o==null||o===!0||o===!1))if(Array.isArray(o))s=W(e,o)||s;else if((r=typeof o)=="string")e.push(document.createTextNode(o));else if(r==="function")if(n){for(;typeof o=="function";)o=o();s=W(e,Array.isArray(o)?o:[o])||s}else e.push(o),s=!0;else e.push(document.createTextNode(o.toString()))}return s}function _(e,t,n){for(let s=0,i=t.length;s<i;s++)e.insertBefore(t[s],n)}function C(e,t,n,s){if(n===void 0)return e.textContent="";const i=s||document.createTextNode("");if(t.length){let l=!1;for(let o=t.length-1;o>=0;o--){const r=t[o];if(i!==r){const y=r.parentNode===e;!l&&!o?y?e.replaceChild(i,r):e.insertBefore(i,n):y&&r.remove()}else l=!0}}else e.insertBefore(i,n);return[i]}var B,Te=new Uint8Array(16);function Ne(){if(!B&&(B=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!B))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(Te)}var Re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Fe(e){return typeof e=="string"&&Re.test(e)}var c=[];for(var G=0;G<256;++G)c.push((G+256).toString(16).substr(1));function Ue(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!Fe(n))throw TypeError("Stringified UUID is invalid");return n}function De(e,t,n){e=e||{};var s=e.random||(e.rng||Ne)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=s[i];return t}return Ue(s)}export{Be as S,Z as a,Ve as b,Se as c,S as d,ce as e,Ee as i,Pe as o,Le as r,ke as s,Oe as t,v as u,De as v};
